<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Antifraude</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script defer src="/static/app.js"></script>
</head>
<body>
  <header>
    <h1>Monitoramento de Despesas — Antifraude</h1>
    <div class="filters">
      <label>Categoria:
        <select id="category">
          <option value="">Todas</option>
          <option>Alimentação</option>
          <option>Transporte</option>
          <option>Taxi</option>
          <option>Pedágio</option>
          <option>Hospedagem</option>
        </select>
      </label>
      <button id="refresh">Atualizar</button>
    </div>
  </header>
  <main>
    <section class="new-expense">
      <h2>Adicionar despesa e calcular</h2>
      <div class="form-grid">
        <label>Categoria
          <select id="in_category">
            <option>Alimentação</option>
            <option>Transporte</option>
            <option>Taxi</option>
            <option>Pedágio</option>
            <option>Hospedagem</option>
          </select>
        </label>
        <label>Valor (R$)
          <input id="in_amount" type="number" step="0.01" value="100" />
        </label>
        <label>Descrição
          <input id="in_description" type="text" placeholder="ex: almoço cliente" />
        </label>
        <label>Solicitante (ID)
          <input id="in_requester" type="text" value="U100" />
        </label>
        <label>Viajante (ID)
          <input id="in_traveller" type="text" value="U100" />
        </label>
        <label>Aprovador (ID)
          <input id="in_approver" type="text" value="A10" />
        </label>
        <label>Data solicitação
          <input id="in_reqdate" type="date" />
        </label>
        <label>Data viagem
          <input id="in_traveldate" type="date" />
        </label>
        <label>Departamento
          <select id="in_department">
            <option>Financeiro</option>
            <option>Comercial</option>
            <option>Operações</option>
            <option>Tecnologia</option>
            <option>RH</option>
          </select>
        </label>
        <label>Cargo
          <select id="in_jobtitle">
            <option>Analista</option>
            <option>Coordenador</option>
            <option>Gerente</option>
            <option>Especialista</option>
            <option>Diretor</option>
          </select>
        </label>
        <label>Status
          <select id="in_status">
            <option>Aprovado</option>
            <option>Pendente</option>
            <option>Reprovado</option>
          </select>
        </label>
        <label>Moeda
          <input id="in_currency" type="text" value="BRL" />
        </label>
      </div>
      <div class="actions">
        <button id="calc-btn">Calcular Score</button>
        <div id="calc-result" class="result"></div>
        <div id="calc-flags" class="flags"></div>
      </div>
    </section>
    <section>
      <table>
        <thead>
          <tr>
            <th>Despesa</th>
            <th>Categoria</th>
            <th>Valor</th>
            <th>Departamento</th>
            <th>Data</th>
            <th>Score</th>
            <th>Risco</th>
            <th>Modelo</th>
          </tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>
    </section>
  </main>
  <section class="learning">
    <h2>Curva de Aprendizagem</h2>
    <div id="metrics" class="metrics-card">
      <div><strong>Tamanho:</strong> <span id="m-size">—</span></div>
      <div><strong>Teste (Acc):</strong> <span id="m-test-acc">—</span></div>
      <div><strong>Teste (F1):</strong> <span id="m-test-f1">—</span></div>
      <div><strong>Teste (ROC-AUC):</strong> <span id="m-test-roc">—</span></div>
      <div><strong>Teste (PR-AUC):</strong> <span id="m-test-pr">—</span></div>
    </div>
    <p style="font-size:12px;color:#475569">Curva atualizada pelo Trainer; recarregue após novo treino.</p>
    <img id="learning-curve" src="/static/learning_curve.png" alt="Curva de Aprendizagem" style="max-width:100%;border:1px solid #e5e7eb;border-radius:4px" />
  </section>
</body>
</html>